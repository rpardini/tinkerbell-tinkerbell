hookImageServer:
  enabled: false
  hostDirectory: "/opt/hook"
  #nodeSelector:
  #  "kubernetes.io/hostname": "mekotronics-r58x-4g-lan1.fritz.box" #  192.168.66.174

nodePort: # @TODO: better to have an LB?
  hookImageServer:
    enabled: false
    port: 32083

#### Tinkerbell (-ng) subChart.
tinkerbell:
  enabled: true
  hookos:
    enabled: false # suite does its own nginx
  kubevip:
    enabled: false # suite does not use Smee at all, much less kubevip
  deployment:
    daemonSet:
      enabled: false # if true, it becomes actually a DaemonSet, not Deployment
    strategy:
      type: Recreate # stop old pod before creating a new one - needed for hostNetwork
    hostNetwork: true # deploy on the host network
    envs:
      globals:
        enableRufioController: false # do not deploy Rufio  (BMC controller)
        enableSecondstar: false # do not deploy Secondstar (Serial over SSH)
        enableSmee: false # Do not, I repeat, do NOT deploy Smee (DHCP/TFTP/Syslog/HTTP-for-IPXE)
    init: # Not deploying Smee, so init not required
      enabled: false
  service:
    type: ClusterIP # we're already in hostNetwork mode
    #lbClass: "io.cilium/node" # Use Cilium's Node LB

#### SHOWCASE. Needs to know coordinates to where Hegel / Smee (syslog, etc) and HookOS vmlinux and OS images are.
showcase:
  enabled: false
  workflows:
    enabled: true # false to completely skip generating Tinkerbell Workflow CRs; Hardware and Templates are still generated
  jobs:
    enabled: true  # false to completely skip generating jobs

OLD_STUFF:
  smee:
    additionalArgs: ["--dhcp-mode=proxy"] # DHCP proxy mode!
    hostNetwork: true # no proxies, loadbalancers, or anything: it just runs as if directly on the k8s host.
    #additionalEnv: [ { name: "SMEE_PUBLIC_IP_INTERFACE", value: "lan" } ] # auto-detect IP's on this interface
    logLevel: "debug"
    trustedProxies: ["0.0.0.0/0"] # Trust _all_ proxies, insecure
    imagePullPolicy: Always # I re-push it there sometimes
    nodeSelector:
      "kubernetes.io/hostname": "mekotronics-r58x-4g-lan1.fritz.box" #  192.168.66.174
    deployment:
      strategy:
        type: Recreate # stop old pod before creating a new one
    rbac:
      type: ClusterRole # for multi-namespace
      name: smee-cluster-role
      bindingName: smee-cluster-rolebinding

  hegel:
    trustedProxies: ["0.0.0.0/0"] # Trust _all_ proxies, insecure
    rbac:
      type: ClusterRole # for multi-namespace
      name: hegel-cluster-role
      bindingName: hegel-cluster-rolebinding

  tink:
    controller:
      imagePullPolicy: Always
      rbac:
        type: ClusterRole # for multi-namespace
        name: tink-controller-cluster-role
        bindingName: tink-controller-cluster-rolebinding
    server:
      imagePullPolicy: Always
      rbac:
        type: ClusterRole # for multi-namespace
        name: tink-server-cluster-role
        bindingName: tink-server-cluster-rolebinding

